define <4 x i16> @f(<4 x i32> %0) {
  %2 = icmp sgt <4 x i32> %0, <i32 -32768, i32 -32768, i32 -32768, i32 -32768>
  %3 = select <4 x i1> %2, <4 x i32> %0, <4 x i32> <i32 -32768, i32 -32768, i32 -32768, i32 -32768>
  %4 = icmp slt <4 x i32> %3, <i32 32767, i32 32767, i32 32767, i32 32767>
  %5 = select <4 x i1> %4, <4 x i32> %3, <4 x i32> <i32 32767, i32 32767, i32 32767, i32 32767>
  %6 = trunc <4 x i32> %5 to <4 x i16>
  ret <4 x i16> %6
}